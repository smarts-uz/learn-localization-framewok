!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self)["fast-stringify"]=e()}(this,function(){"use strict";function t(t,e){return t.slice(0,e).join(".")||"."}function e(t,e){for(var n=t.length,i=0;i<n;++i)if(t[i]===e)return i+1;return 0}return function(n,i,f,r){return JSON.stringify(n,function(n,i){var f="function"==typeof n,r="function"==typeof i,o=[],u=[];return function(c,s){if("object"==typeof s)if(o.length){var l=e(o,this);0===l?o[o.length]=this:(o.splice(l),u.splice(l)),u[u.length]=c;var p=e(o,s);if(0!==p)return r?i.call(this,c,s,t(u,p)):"[ref="+t(u,p)+"]"}else o[0]=s,u[0]=c;return f?n.call(this,c,s):s}}(i,r),f)}});
